RewriteEngine On

# Redirect bare domain to the canonical www hostname.
RewriteCond %{HTTP_HOST} ^unsubscribe\.casadelpollo\.com$ [NC]
RewriteRule ^(.*)$ https://www.unsubscribe.casadelpollo.com/$1 [R=301,L]

# Block direct access to view templates.
RewriteRule ^templates/ - [F,L]

# Allow direct access to existing files and folders.
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# Route app endpoints to the PHP front controller.
RewriteRule ^(unsubscribe|resubscribe|healthz)/?$ index.php [QSA,L]
